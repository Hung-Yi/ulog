{"version":3,"file":"ulog.js","sources":["../js/container/container.js","../js/html/html.js","../js/widget/node.js","../js/widget/widget.js","../js/widget/article.js","../js/widget/icon.js","../js/http/http.js","../js/post/post.js","../js/widget/card.js","../js/widget/link.js","../js/blog/blog.js","../js/index.js"],"sourcesContent":["/**\n *  @file       container.js\n *  @brief      The Container module of ULog.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       03/18/2018 created.\n *  @date       03/25/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details\n *\n *  The Container module of the ULog.\n */\n'use strict';\n\nconst container = function (el='div') {\n  this.node = document.createElement(el);\n  this.node.style.height = '100vh';\n};\n\ncontainer.prototype = {\n  setHeader: function (header) {\n    this.node.insertBefore(header, this.node.firstChild);\n\n    return this;\n  },\n\n  setContent: function (content) {\n    this.node.insertBefore(content, this.node.lastChild);\n\n    return this;\n  },\n\n  setFooter: function (footer) {\n    this.node.appendChild(footer);\n\n    return this;\n  },\n};\n\nexport default container;\n\n// container.js\n","/**\n *  @file       html.js\n *  @brief      The HTML module of the HTML subsystem.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       03/25/2018 created.\n *  @date       04/23/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details\n *\n *  The HTML module of the HTML subsystem.\n */\n'use strict';\n\nconst TAG = {\n  A: 'a',\n  ARTICLE: 'article',\n  ASIDE: 'aside',\n  BODY: 'body',\n  BUTTON: 'button',\n  DATALIST: 'datalist',\n  DIV: 'div',\n  FIGURE: 'figure',\n  FOOTER: 'footer',\n  FORM: 'form',\n  H1: 'h1',\n  H2: 'h2',\n  H3: 'h3',\n  H4: 'h4',\n  H5: 'h5',\n  H6: 'h6',\n  HEADER: 'header',\n  I: 'i',\n  IMG: 'img',\n  INPUT: 'input',\n  LABEL: 'label',\n  LI: 'li',\n  NAV: 'nav',\n  OL: 'ol',\n  OPTION: 'option',\n  P: 'p',\n  PRE: 'pre',\n  SECTION: 'section',\n  SELECT: 'select',\n  SPAN: 'span',\n  TABLE: 'table',\n  TBODY: 'tbody',\n  TD: 'td',\n  TEXTAREA: 'textarea',\n  TH: 'th',\n  THEAD: 'thead',\n  TR: 'tr',\n  UL: 'ul',\n};\n\nexport default TAG;\n\n// html/html.js\n","/**\n *  @file       node.js\n *  @brief      The Node module of the Widget subsystem.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       03/25/2018 created.\n *  @date       04/02/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details\n *\n *  The Node module of the Widget subsystem.\n */\n'use strict';\n\nlet node = function ({tag, className, attribute, handler}) {\n  let el = document.createElement(tag);\n\n  if (className) {\n    el.className = className;\n  } // fi\n\n  if (attribute) {\n    Object.entries(attribute).forEach(([key, value]) => {\n      el[key] = value;\n    });\n  } // fi\n\n  if (handler) {\n    Object.entries(handler).forEach(([e, fn]) => {\n      el.addEventListener(e, fn);\n    });\n  }\n\n  return el;\n};\n\nexport default node;\n\n// widget/node.js\n","/**\n *  @file       widget.js\n *  @brief      The Widget component of the Widget system.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       03/24/2018 created.\n *  @date       04/21/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details\n *\n *  The Widget component of the Widget system.\n */\n'use strict';\n\nlet widget = {\n  appendChild: function (node) {\n    let el = this.node;\n\n    el.appendChild(node);\n\n    return this;\n  },\n\n  addClass: function (cls) {\n    if (!this.node.className.includes(cls)) {\n      this.node.className += this.node.className ? ` ${cls}` : cls;\n    } // fi\n\n    return this;\n  },\n\n  removeClass: function (cls) {\n    this.node.className = this.node.className.replace(\n      RegExp(`[ ]*${cls}`, 'g'), ''\n    );\n\n    return this;\n  },\n\n  setAttribute: function (attribute, value) {\n    this.node[attribute] = value;\n\n    return this;\n  },\n\n  setBackgroundColor: function (color) {\n    let el = this.node;\n\n    el.style.backgroundColor = color;\n\n    return this;\n  },\n\n  setForgroundColor: function (color) {\n    let el = this.node;\n\n    el.style.color = color;\n\n    return this;\n  },\n};\n\nexport default widget;\n\n// widget/widget.js\n","/**\n *  @file       article.js\n *  @brief      The Article component of the Widget system.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       04/07/2018 created.\n *  @date       04/07/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details\n *\n *  The Article component of the Widget system.\n */\n'use strict';\n\nimport HTML from '../html/html.js';\n\nimport node from './node.js';\nimport widget from './widget.js';\n\nlet Article = function (tag) {\n  this.node = node({\n    tag: HTML.ARTICLE,\n    attribute: {\n      contentEditable: true\n    }\n  });\n};\n\nArticle.prototype = Object.create(widget);\n\nArticle.prototype.constructor = Article;\n\nexport default Article;\n\n// widget/article.js\n","/**\n *  @file       icon.js\n *  @brief      The Icon component of the Widget system.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       04/02/2018 created.\n *  @date       04/07/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details\n *\n *  The Icon component of the Widget system.\n */\n'use strict';\n\nimport HTML from '../html/html.js';\n\nimport node from './node.js';\nimport widget from './widget.js';\n\nlet Icon = function (tag, handler) {\n  let el = node({\n    tag: HTML.SPAN,\n    handler: handler,\n    className: 'icon'\n  });\n  \n  el.appendChild(\n    node({\n      tag: HTML.I,\n      className: `fas fa-${tag}`\n    })\n  );\n\n  this.node = el;\n}\n\nIcon.prototype = Object.create(widget);\n\nIcon.prototype.constructor = Icon;\n\nexport default Icon;\n\n// widget/icon.js\n","/**\n *  @file       http.js\n *  @brief      The http module.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       04/16/2018 created.\n *  @date       04/16/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details \n *\n *  The http module.\n */\n'use strict';\n\nconst get_headers = (token) => {\n  let headers = new Headers({\n    'Accept': 'application/json',\n    'Content-Type': 'application/json; charset=UTF-8'\n  });\n\n  if (token.hasOwnProperty('auth')) {\n    headers.append('Authorization', token.auth);\n  } // fi\n\n  if (token.hasOwnProperty('account')) {\n    headers.append('Account-ID', token.account);\n  } // fi\n\n  return headers;\n}; // get_headers()\n\nconst get_url = (url, args={}) => {\n  let query = [];\n\n  for (var key in args) {\n    if (args.hasOwnProperty(key)) {\n      let k = encodeURIComponent(key);\n      let v = encodeURIComponent(args[key]);\n\n      query.push(`${k}=${v}`);\n    } // fi\n  } // od\n\n  url += (query.length) ? '?' + query.join('&') : '';\n\n  return url;\n}; // get_url()\n\nexport default {\n  token: {},\n\n  HTTP_OK: 200,\n\n  HTTP_203: 203,\n\n  HTTP_204: 204,\n\n  seal: (token, auth, account) => {\n    token.auth = auth;\n    token.account = account;\n  },\n\n  get: (url, args={}, token={}) => {\n    return fetch(\n      get_url(url, args),\n      {\n        method: 'GET',\n        headers: get_headers(token),\n      } \n    );\n  },\n\n  head: (url, token={}) => {\n    return fetch(\n      url,\n      {\n        method: 'HEAD',\n        headers: get_headers(token),\n      } \n    );\n  },\n\n  patch: (url, data, token={}) => {\n    return fetch(\n      url,\n      {\n        method: 'PATCH',\n        headers: get_headers(token),\n        body: JSON.stringify(data)\n      } \n    );\n  },\n\n  post: (url, data, token={}) => {\n    console.log('token: ' + token.auth);\n\n    return fetch(\n      url,\n      {\n        method: 'POST',\n        headers: get_headers(token),\n        body: JSON.stringify(data)\n      } \n    );\n  },\n\n  put: (url, data, token={}) => {\n    return fetch(\n      url,\n      {\n        method: 'PUT',\n        headers: get_headers(token),\n        body: JSON.stringify(data)\n      } \n    );\n  },\n\n  query: (url, data, token={}) => {\n    console.log('query => token: ' + token.auth);\n\n    return fetch(\n      url,\n      {\n        method: 'POST',\n        headers: get_headers(token),\n        body: JSON.stringify(data)\n      } \n    ).then(response => {\n      let json = {};\n\n      if (response.status == 200) {\n        json = response.json();\n      }\n\n      return json;\n    });\n  },\n};\n\n// http.js\n","/**\n *  @file       post.js\n *  @brief      The Post component of the system.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       04/07/2018 created.\n *  @date       04/20/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details\n *\n *  The Post component of the system.\n */\n'use strict';\n\nimport HTML from '../html/html.js';\n\nimport Article from '../widget/article.js';\nimport Icon from '../widget/icon.js';\nimport node from '../widget/node.js';\nimport widget from '../widget/widget.js';\nimport http from '../http/http.js';\n\nlet toolBar = () => {\n  let el = node({\n    tag: HTML.DIV\n  });\n\n  [\n    {\n      tag: 'edit',\n      cmd: '',\n    },\n    {\n      tag:'undo',\n      cmd: 'undo',\n    },\n    {\n      tag: 'redo',\n      cmd: 'redo',\n    },\n    {\n      tag: 'copy',\n      cmd: 'copy',\n    },\n    {\n      tag: 'cut',\n      cmd: 'cut',\n    },\n    {\n      tag: 'paste',\n      cmd: 'paste',\n    },\n    {\n      tag: 'bold',\n      cmd: 'bold',\n    },\n    { \n      tag: 'italic', \n      cmd: 'italic',\n    },\n    { \n      tag:'underline', \n      cmd: 'underline',\n    },\n    {\n      tag: 'align-left',\n      cmd: 'justifyLeft',\n    },\n    { \n      tag: 'align-center',\n      cmd: 'justifyCenter',\n    },\n    { \n      tag: 'align-right',\n      cmd: 'justifyRight',\n    },\n    { \n      tag: 'list-ol',\n      cmd: 'insertOrderedList',\n    },\n    { \n      tag: 'list-ul',\n      cmd: 'insertUnorderedList',\n    },\n    { \n      tag: 'indent',\n      cmd: 'indent',\n    },\n    { \n      tag: 'outdent',\n      cmd: 'outdent',\n    },\n    { \n      tag: 'link',\n      cmd: '',\n      value: ''\n    },\n  ].forEach(ctrl => {\n    let icon = new Icon(ctrl.tag, {\n      'mousedown': (e) => {\n        e.preventDefault();\n      },\n      'click': (e) => {\n        document.execCommand(ctrl.cmd, false, ctrl.value);\n      }\n    });\n\n    icon.addClass('edit-tool');\n\n    el.appendChild(icon.node);\n  });\n\n  el.className = 'toolBar';\n\n  return el;\n};\n\nconst titleBar = () => {\n  let el = node({\n    tag: HTML.DIV,\n    className: 'post-title',\n  });\n\n  let title = node({\n    tag: HTML.H3,\n    attribute: {\n      'contentEditable': 'true',\n    }\n  });\n\n\n  title.innerHTML = '標題：未定';\n\n  el.appendChild(title);\n\n  return el;\n};\n\nlet Post = function (tag) {\n  let article = new Article();\n  article.addClass('edit-area')\n    .setAttribute('contentEditable', true);\n\n  this.node = node({\n    tag: HTML.FORM,\n    attribute: {\n      'method': 'post',\n      'action': 'post.php'\n    },\n    handler: {\n      \"submit\": (e) => {\n        e.preventDefault();\n\n        let formData = new FormData();\n\n        formData.append('content', article.node.innerHTML);\n\n        fetch('post', {\n          method: 'POST',\n          body: formData\n        }).then(response => {\n          return response.json();\n        }).then(json => {\n          console.log(JSON.stringify(json, null, 2));\n        })\n      }\n    },\n  });\n\n  this.node.appendChild(titleBar());\n\n  this.node.appendChild(toolBar());\n  this.node.appendChild(node({\n    tag: HTML.INPUT,\n    attribute: {\n      'type': 'hidden',\n      'name': 'article'\n    }\n  }));\n\n  this.node.appendChild(article.node);\n\n  this.node.appendChild(node({\n    tag: HTML.INPUT,\n    attribute: {\n      'type': 'submit',\n      'value': '貼  文'\n    }\n  }));\n};\n\nPost.prototype = Object.create(widget);\n\nPost.prototype.constructor = Post;\n\nexport default Post;\n\n// post/post.js\n","/**\n *  @file       card.js\n *  @brief      The Card component of the Widget system.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       03/24/2018 created.\n *  @date       04/02/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details\n *\n *  The Card component of the Widget system.\n */\n'use strict';\n\nimport HTML from '../html/html.js';\n\nimport node from './node.js';\nimport widget from './widget.js';\n\nlet Card = function (tag) {\n  this.node = node ({\n    tag: HTML.SECTION,\n    className: 'card'\n  });\n};\n\nCard.prototype = Object.create(widget);\n\nCard.prototype.constructor = Card;\n\nCard.prototype.setHeader = function (header) {\n  if (this.header) {\n    this.node.replaceChild(header.node, this.header.node);\n  }\n  else {\n    this.node.insertBefore(header.node, this.node.firstChild);\n  }\n\n  this.header = header;\n\n  return this;\n};\n\nCard.prototype.setContent = function (content) {\n  if (this.content) {\n    this.node.replaceChild(content.node, this.content.node);\n  }\n  else {\n    this.node.insertBefore(content.node, this.node.lastChild);\n  }\n\n  this.content = content;\n\n  return this;\n};\n\nCard.prototype.setFooter = function (footer) {\n  if (this.footer) {\n    this.node.replaceChild(footer.node, this.footer.node);\n  }\n  else {\n    this.node.appendChild(footer.node);\n  }\n\n  this.footer = footer;\n\n  return this;\n};\n\nexport default Card;\n\n// widget/card.js\n","/**\n *  @file       link.js\n *  @brief      The Link component of the Widget system.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       04/23/2018 created.\n *  @date       04/23/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details \n *\n *  The Link component of the Widget system.\n */\n'use strict';\n\nimport HTML from '../html/html.js';\n\nimport node from './node.js';\nimport widget from './widget.js';\n\nlet Link = function (tag) {\n  let el = node({\n    tag: HTML.LI,\n  });\n\n  el.appendChild(\n    node({\n      tag: HTML.A,\n      attribute: {\n        'textContent': tag,\n      }\n    })\n  );\n\n  this.node = el;\n};\n\nLink.prototype = Object.create(widget);\n\nLink.prototype.constructor = Link;\n\nexport default Link;\n\n// widget/link.js\n","/**\n *  @file       blog.js\n *  @brief      The Blog module of ULog.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       03/18/2018 created.\n *  @date       04/23/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details\n *\n *  The Blog module of the ULog.\n */\n'use strict';\n\nimport Container from '../container/container.js';\n\nimport HTML from '../html/html.js';\n\nimport Post from '../post/post.js';\n\nimport Card from '../widget/card.js';\nimport Link from '../widget/link.js';\nimport node from '../widget/node.js';\n\nconst controls = () => {\n  let newPost = new Link('新  帖');\n\n  let ul = node({\n    tag: HTML.UL,\n    className: 'nav-control'\n  });\n\n  ul.appendChild(newPost.node);\n\n  let el = node({\n    tag: HTML.SECTION,\n  });\n\n  el.appendChild(ul);\n\n  return el;\n}\n\nconst banner = () => {\n  let el = document.createElement('header');\n\n  let title = document.createElement('h1');\n  title.textContent = 'U Log';\n\n  el.appendChild(title);\n  el.style.background = '#00a0ffff';\n  el.style.height = '5rem';\n\n  el.appendChild(controls());\n\n  return el;\n};\n\nconst content = () => {\n  let card = new Card('blog');\n  let post = new Post();\n  let el = document.createElement('main');\n\n  card.appendChild(post.node);\n\n  el.appendChild(card.node);\n\n  return el;\n};\n\nconst footer = () => {\n  let el = document.createElement('footer');\n\n  let copyright = document.createElement('p');\n  copyright.textContent = '© 2018, Yiwei Chiao';\n  copyright.style.margin = '0';\n\n  el.appendChild(copyright);\n\n  el.style.background = '#ff0000ff';\n  el.style.height = '2rem';\n\n  return el;\n};\n\nexport default function () {\n  let blog = new Container('div');\n\n  return blog.setHeader(banner())\n      .setFooter(footer())\n      .setContent(content());\n};\n\n// blog.js\n","/**\n *  @file       index.js\n *  @brief      The entry point of ULog.\n *  @author     Yiwei Chiao (ywchiao@gmail.com)\n *  @date       03/12/2018 created.\n *  @date       04/07/2018 last modified.\n *  @version    0.1.0\n *  @since      0.1.0\n *  @copyright  MIT, © 2018 Yiwei Chiao\n *  @details\n *\n *  The entry point of ULog.\n */\n'use strict';\n\nimport Blog from './blog/blog.js';\n\nwindow.addEventListener('load', () => {\n  let blog = Blog();\n\n  document.getElementsByTagName('html')[0].style.height = '100vh';\n\n  document.body.style.height = '100vh';\n  document.body.style.margin = '0';\n\n  document.body.appendChild(blog.node);\n});\n\n// index.js\n"],"names":["container","el","node","document","createElement","style","height","prototype","setHeader","header","insertBefore","firstChild","setContent","content","lastChild","setFooter","footer","appendChild","TAG","A","ARTICLE","ASIDE","BODY","BUTTON","DATALIST","DIV","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","I","IMG","INPUT","LABEL","LI","NAV","OL","OPTION","P","PRE","SECTION","SELECT","SPAN","TABLE","TBODY","TD","TEXTAREA","TH","THEAD","TR","UL","tag","className","attribute","handler","Object","entries","forEach","key","value","e","fn","addEventListener","widget","addClass","cls","includes","removeClass","replace","RegExp","setAttribute","setBackgroundColor","color","backgroundColor","setForgroundColor","Article","HTML","contentEditable","create","constructor","Icon","toolBar","cmd","icon","ctrl","preventDefault","execCommand","titleBar","title","innerHTML","Post","article","formData","FormData","append","fetch","method","body","then","response","json","console","log","JSON","stringify","Card","replaceChild","Link","controls","newPost","ul","banner","textContent","background","card","post","copyright","margin","blog","Container","window","Blog","getElementsByTagName"],"mappings":"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"}